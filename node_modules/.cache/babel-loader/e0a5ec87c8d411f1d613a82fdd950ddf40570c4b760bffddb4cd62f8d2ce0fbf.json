{"ast":null,"code":"var _localStorage$getItem;\nimport { signal } from \"@preact/signals-react\";\nconst getCart = (_localStorage$getItem = localStorage.getItem(\"cart\")) !== null && _localStorage$getItem !== void 0 ? _localStorage$getItem : \"[]\";\nexport const cartState = signal(JSON.parse(getCart));\nexport const add = itemid => {\n  let stateItemsForUpdate = cartState.value;\n  let filterForUpdate = stateItemsForUpdate.filter(item => item.id == itemid);\n  if (filterForUpdate.length > 0) stateItemsForUpdate.forEach(item => {\n    if (item.id == itemid) item.amount++;\n  });else stateItemsForUpdate.push({\n    id: itemid,\n    amount: 1\n  });\n  cartState.value = [...stateItemsForUpdate];\n  localStorage.setItem(\"cart\", JSON.stringify(cartState.value));\n};\nexport const less = itemid => {\n  let stateItemsForUpdate = cartState.value;\n  stateItemsForUpdate.forEach(item => {\n    if (item.id == itemid && item.amount >= 1) item.amount--;\n    if (item.id == itemid && item.amount === 0) {\n      let filterForUpdate = stateItemsForUpdate.filter(item => item.id != itemid);\n      console.log(\"filterForUpdate: \", filterForUpdate);\n      stateItemsForUpdate = [...filterForUpdate];\n    }\n  });\n  cartState.value = [...stateItemsForUpdate];\n  localStorage.setItem(\"cart\", JSON.stringify(cartState.value));\n};","map":{"version":3,"names":["signal","getCart","_localStorage$getItem","localStorage","getItem","cartState","JSON","parse","add","itemid","stateItemsForUpdate","value","filterForUpdate","filter","item","id","length","forEach","amount","push","setItem","stringify","less","console","log"],"sources":["/workspaces/hamechalek_client/src/store/cart.tsx"],"sourcesContent":["import { signal } from \"@preact/signals-react\";\n\n\nconst getCart = localStorage.getItem(\"cart\") ?? \"[]\";\n\nexport const cartState = signal<any>(JSON.parse(getCart));\n\n\nexport const add = (itemid: string | undefined) => {\n    let stateItemsForUpdate = cartState.value;\n    let filterForUpdate = stateItemsForUpdate.filter((item: any) => item.id == itemid);\n    if (filterForUpdate.length > 0)\n        stateItemsForUpdate.forEach((item: any) => {\n            if (item.id == itemid)\n                item.amount++\n        });\n    else stateItemsForUpdate.push({ id: itemid, amount: 1 })\n\n\n    cartState.value = [...stateItemsForUpdate];\n    localStorage.setItem(\"cart\", JSON.stringify(cartState.value));\n\n}\n\n\nexport const less = (itemid: string | undefined) => {\n    let stateItemsForUpdate = cartState.value;\n    stateItemsForUpdate.forEach((item: any) => {\n        if (item.id == itemid && item.amount >= 1)\n            item.amount--\n        if (item.id == itemid && item.amount === 0) {\n            let filterForUpdate = stateItemsForUpdate.filter((item: any) => item.id != itemid);\n            console.log(\"filterForUpdate: \", filterForUpdate);\n            stateItemsForUpdate = [...filterForUpdate];\n        }\n    });\n    cartState.value = [...stateItemsForUpdate];\n    localStorage.setItem(\"cart\", JSON.stringify(cartState.value));\n}\n"],"mappings":";AAAA,SAASA,MAAM,QAAQ,uBAAuB;AAG9C,MAAMC,OAAO,IAAAC,qBAAA,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,cAAAF,qBAAA,cAAAA,qBAAA,GAAI,IAAI;AAEpD,OAAO,MAAMG,SAAS,GAAGL,MAAM,CAAMM,IAAI,CAACC,KAAK,CAACN,OAAO,CAAC,CAAC;AAGzD,OAAO,MAAMO,GAAG,GAAIC,MAA0B,IAAK;EAC/C,IAAIC,mBAAmB,GAAGL,SAAS,CAACM,KAAK;EACzC,IAAIC,eAAe,GAAGF,mBAAmB,CAACG,MAAM,CAAEC,IAAS,IAAKA,IAAI,CAACC,EAAE,IAAIN,MAAM,CAAC;EAClF,IAAIG,eAAe,CAACI,MAAM,GAAG,CAAC,EAC1BN,mBAAmB,CAACO,OAAO,CAAEH,IAAS,IAAK;IACvC,IAAIA,IAAI,CAACC,EAAE,IAAIN,MAAM,EACjBK,IAAI,CAACI,MAAM,EAAE;EACrB,CAAC,CAAC,CAAC,KACFR,mBAAmB,CAACS,IAAI,CAAC;IAAEJ,EAAE,EAAEN,MAAM;IAAES,MAAM,EAAE;EAAE,CAAC,CAAC;EAGxDb,SAAS,CAACM,KAAK,GAAG,CAAC,GAAGD,mBAAmB,CAAC;EAC1CP,YAAY,CAACiB,OAAO,CAAC,MAAM,EAAEd,IAAI,CAACe,SAAS,CAAChB,SAAS,CAACM,KAAK,CAAC,CAAC;AAEjE,CAAC;AAGD,OAAO,MAAMW,IAAI,GAAIb,MAA0B,IAAK;EAChD,IAAIC,mBAAmB,GAAGL,SAAS,CAACM,KAAK;EACzCD,mBAAmB,CAACO,OAAO,CAAEH,IAAS,IAAK;IACvC,IAAIA,IAAI,CAACC,EAAE,IAAIN,MAAM,IAAIK,IAAI,CAACI,MAAM,IAAI,CAAC,EACrCJ,IAAI,CAACI,MAAM,EAAE;IACjB,IAAIJ,IAAI,CAACC,EAAE,IAAIN,MAAM,IAAIK,IAAI,CAACI,MAAM,KAAK,CAAC,EAAE;MACxC,IAAIN,eAAe,GAAGF,mBAAmB,CAACG,MAAM,CAAEC,IAAS,IAAKA,IAAI,CAACC,EAAE,IAAIN,MAAM,CAAC;MAClFc,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEZ,eAAe,CAAC;MACjDF,mBAAmB,GAAG,CAAC,GAAGE,eAAe,CAAC;IAC9C;EACJ,CAAC,CAAC;EACFP,SAAS,CAACM,KAAK,GAAG,CAAC,GAAGD,mBAAmB,CAAC;EAC1CP,YAAY,CAACiB,OAAO,CAAC,MAAM,EAAEd,IAAI,CAACe,SAAS,CAAChB,SAAS,CAACM,KAAK,CAAC,CAAC;AACjE,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}