{"ast":null,"code":"var _localStorage$getItem;import{signal}from\"@preact/signals-react\";const getCart=(_localStorage$getItem=localStorage.getItem(\"cart\"))!==null&&_localStorage$getItem!==void 0?_localStorage$getItem:\"[]\";export const cartState=signal(JSON.parse(getCart));export const add=itemid=>{let stateItemsForUpdate=cartState.value;let filterForUpdate=stateItemsForUpdate.filter(item=>item.id==itemid);if(filterForUpdate.length>0)stateItemsForUpdate.forEach(item=>{if(item.id==itemid)item.amount++;});else stateItemsForUpdate.push({id:itemid,amount:1});cartState.value=[...stateItemsForUpdate];localStorage.setItem(\"cart\",JSON.stringify(cartState.value));};export const less=itemid=>{let stateItemsForUpdate=cartState.value;stateItemsForUpdate.forEach(item=>{if(item.id==itemid&&item.amount>=1)item.amount--;if(item.id==itemid&&item.amount===0){let filterForUpdate=stateItemsForUpdate.filter(item=>item.id!=itemid);console.log(\"filterForUpdate: \",filterForUpdate);stateItemsForUpdate=[...filterForUpdate];}});cartState.value=[...stateItemsForUpdate];localStorage.setItem(\"cart\",JSON.stringify(cartState.value));};","map":{"version":3,"names":["signal","getCart","_localStorage$getItem","localStorage","getItem","cartState","JSON","parse","add","itemid","stateItemsForUpdate","value","filterForUpdate","filter","item","id","length","forEach","amount","push","setItem","stringify","less","console","log"],"sources":["C:/Users/USER/Documents/GitHub/hamechalek_client/src/store/cart.tsx"],"sourcesContent":["import { signal } from \"@preact/signals-react\";\r\n\r\n\r\nconst getCart = localStorage.getItem(\"cart\") ?? \"[]\";\r\n\r\nexport const cartState = signal<any>(JSON.parse(getCart));\r\n\r\n\r\nexport const add = (itemid: string | undefined) => {\r\n    let stateItemsForUpdate = cartState.value;\r\n    let filterForUpdate = stateItemsForUpdate.filter((item: any) => item.id == itemid);\r\n    if (filterForUpdate.length > 0)\r\n        stateItemsForUpdate.forEach((item: any) => {\r\n            if (item.id == itemid)\r\n                item.amount++\r\n        });\r\n    else stateItemsForUpdate.push({ id: itemid, amount: 1 })\r\n\r\n\r\n    cartState.value = [...stateItemsForUpdate];\r\n    localStorage.setItem(\"cart\", JSON.stringify(cartState.value));\r\n\r\n}\r\n\r\n\r\nexport const less = (itemid: string | undefined) => {\r\n    let stateItemsForUpdate = cartState.value;\r\n    stateItemsForUpdate.forEach((item: any) => {\r\n        if (item.id == itemid && item.amount >= 1)\r\n            item.amount--\r\n        if (item.id == itemid && item.amount === 0) {\r\n            let filterForUpdate = stateItemsForUpdate.filter((item: any) => item.id != itemid);\r\n            console.log(\"filterForUpdate: \", filterForUpdate);\r\n            stateItemsForUpdate = [...filterForUpdate];\r\n        }\r\n    });\r\n    cartState.value = [...stateItemsForUpdate];\r\n    localStorage.setItem(\"cart\", JSON.stringify(cartState.value));\r\n}\r\n"],"mappings":"0BAAA,OAASA,MAAM,KAAQ,uBAAuB,CAG9C,KAAM,CAAAC,OAAO,EAAAC,qBAAA,CAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,UAAAF,qBAAA,UAAAA,qBAAA,CAAI,IAAI,CAEpD,MAAO,MAAM,CAAAG,SAAS,CAAGL,MAAM,CAAMM,IAAI,CAACC,KAAK,CAACN,OAAO,CAAC,CAAC,CAGzD,MAAO,MAAM,CAAAO,GAAG,CAAIC,MAA0B,EAAK,CAC/C,GAAI,CAAAC,mBAAmB,CAAGL,SAAS,CAACM,KAAK,CACzC,GAAI,CAAAC,eAAe,CAAGF,mBAAmB,CAACG,MAAM,CAAEC,IAAS,EAAKA,IAAI,CAACC,EAAE,EAAIN,MAAM,CAAC,CAClF,GAAIG,eAAe,CAACI,MAAM,CAAG,CAAC,CAC1BN,mBAAmB,CAACO,OAAO,CAAEH,IAAS,EAAK,CACvC,GAAIA,IAAI,CAACC,EAAE,EAAIN,MAAM,CACjBK,IAAI,CAACI,MAAM,EAAE,CACrB,CAAC,CAAC,CAAC,IACF,CAAAR,mBAAmB,CAACS,IAAI,CAAC,CAAEJ,EAAE,CAAEN,MAAM,CAAES,MAAM,CAAE,CAAE,CAAC,CAAC,CAGxDb,SAAS,CAACM,KAAK,CAAG,CAAC,GAAGD,mBAAmB,CAAC,CAC1CP,YAAY,CAACiB,OAAO,CAAC,MAAM,CAAEd,IAAI,CAACe,SAAS,CAAChB,SAAS,CAACM,KAAK,CAAC,CAAC,CAEjE,CAAC,CAGD,MAAO,MAAM,CAAAW,IAAI,CAAIb,MAA0B,EAAK,CAChD,GAAI,CAAAC,mBAAmB,CAAGL,SAAS,CAACM,KAAK,CACzCD,mBAAmB,CAACO,OAAO,CAAEH,IAAS,EAAK,CACvC,GAAIA,IAAI,CAACC,EAAE,EAAIN,MAAM,EAAIK,IAAI,CAACI,MAAM,EAAI,CAAC,CACrCJ,IAAI,CAACI,MAAM,EAAE,CACjB,GAAIJ,IAAI,CAACC,EAAE,EAAIN,MAAM,EAAIK,IAAI,CAACI,MAAM,GAAK,CAAC,CAAE,CACxC,GAAI,CAAAN,eAAe,CAAGF,mBAAmB,CAACG,MAAM,CAAEC,IAAS,EAAKA,IAAI,CAACC,EAAE,EAAIN,MAAM,CAAC,CAClFc,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAEZ,eAAe,CAAC,CACjDF,mBAAmB,CAAG,CAAC,GAAGE,eAAe,CAAC,CAC9C,CACJ,CAAC,CAAC,CACFP,SAAS,CAACM,KAAK,CAAG,CAAC,GAAGD,mBAAmB,CAAC,CAC1CP,YAAY,CAACiB,OAAO,CAAC,MAAM,CAAEd,IAAI,CAACe,SAAS,CAAChB,SAAS,CAACM,KAAK,CAAC,CAAC,CACjE,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}