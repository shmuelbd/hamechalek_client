{"ast":null,"code":"import _toConsumableArray from\"C:/Users/USER/Documents/GitHub/hamechalek_client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";var _localStorage$getItem;import{signal}from\"@preact/signals-react\";var getCart=(_localStorage$getItem=localStorage.getItem(\"cart\"))!==null&&_localStorage$getItem!==void 0?_localStorage$getItem:\"[]\";export var cartState=signal(JSON.parse(getCart));export var add=function add(itemid){var stateItemsForUpdate=cartState.value;var filterForUpdate=stateItemsForUpdate.filter(function(item){return item.id==itemid;});if(filterForUpdate.length>0)stateItemsForUpdate.forEach(function(item){if(item.id==itemid)item.amount++;});else stateItemsForUpdate.push({id:itemid,amount:1});cartState.value=_toConsumableArray(stateItemsForUpdate);localStorage.setItem(\"cart\",JSON.stringify(cartState.value));};export var less=function less(itemid){var stateItemsForUpdate=cartState.value;stateItemsForUpdate.forEach(function(item){if(item.id==itemid&&item.amount>=1)item.amount--;if(item.id==itemid&&item.amount===0){var filterForUpdate=stateItemsForUpdate.filter(function(item){return item.id!=itemid;});console.log(\"filterForUpdate: \",filterForUpdate);stateItemsForUpdate=_toConsumableArray(filterForUpdate);}});cartState.value=_toConsumableArray(stateItemsForUpdate);localStorage.setItem(\"cart\",JSON.stringify(cartState.value));};","map":{"version":3,"names":["signal","getCart","_localStorage$getItem","localStorage","getItem","cartState","JSON","parse","add","itemid","stateItemsForUpdate","value","filterForUpdate","filter","item","id","length","forEach","amount","push","_toConsumableArray","setItem","stringify","less","console","log"],"sources":["C:/Users/USER/Documents/GitHub/hamechalek_client/src/store/cart.tsx"],"sourcesContent":["import { signal } from \"@preact/signals-react\";\r\n\r\n\r\nconst getCart = localStorage.getItem(\"cart\") ?? \"[]\";\r\n\r\nexport const cartState = signal<any>(JSON.parse(getCart));\r\n\r\n\r\nexport const add = (itemid: string | undefined) => {\r\n    let stateItemsForUpdate = cartState.value;\r\n    let filterForUpdate = stateItemsForUpdate.filter((item: any) => item.id == itemid);\r\n    if (filterForUpdate.length > 0)\r\n        stateItemsForUpdate.forEach((item: any) => {\r\n            if (item.id == itemid)\r\n                item.amount++\r\n        });\r\n    else stateItemsForUpdate.push({ id: itemid, amount: 1 })\r\n\r\n\r\n    cartState.value = [...stateItemsForUpdate];\r\n    localStorage.setItem(\"cart\", JSON.stringify(cartState.value));\r\n\r\n}\r\n\r\n\r\nexport const less = (itemid: string | undefined) => {\r\n    let stateItemsForUpdate = cartState.value;\r\n    stateItemsForUpdate.forEach((item: any) => {\r\n        if (item.id == itemid && item.amount >= 1)\r\n            item.amount--\r\n        if (item.id == itemid && item.amount === 0) {\r\n            let filterForUpdate = stateItemsForUpdate.filter((item: any) => item.id != itemid);\r\n            console.log(\"filterForUpdate: \", filterForUpdate);\r\n            stateItemsForUpdate = [...filterForUpdate];\r\n        }\r\n    });\r\n    cartState.value = [...stateItemsForUpdate];\r\n    localStorage.setItem(\"cart\", JSON.stringify(cartState.value));\r\n}\r\n"],"mappings":"wKAAA,OAASA,MAAM,KAAQ,uBAAuB,CAG9C,GAAM,CAAAC,OAAO,EAAAC,qBAAA,CAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,UAAAF,qBAAA,UAAAA,qBAAA,CAAI,IAAI,CAEpD,MAAO,IAAM,CAAAG,SAAS,CAAGL,MAAM,CAAMM,IAAI,CAACC,KAAK,CAACN,OAAO,CAAC,CAAC,CAGzD,MAAO,IAAM,CAAAO,GAAG,CAAG,QAAN,CAAAA,GAAGA,CAAIC,MAA0B,CAAK,CAC/C,GAAI,CAAAC,mBAAmB,CAAGL,SAAS,CAACM,KAAK,CACzC,GAAI,CAAAC,eAAe,CAAGF,mBAAmB,CAACG,MAAM,CAAC,SAACC,IAAS,QAAK,CAAAA,IAAI,CAACC,EAAE,EAAIN,MAAM,GAAC,CAClF,GAAIG,eAAe,CAACI,MAAM,CAAG,CAAC,CAC1BN,mBAAmB,CAACO,OAAO,CAAC,SAACH,IAAS,CAAK,CACvC,GAAIA,IAAI,CAACC,EAAE,EAAIN,MAAM,CACjBK,IAAI,CAACI,MAAM,EAAE,CACrB,CAAC,CAAC,CAAC,IACF,CAAAR,mBAAmB,CAACS,IAAI,CAAC,CAAEJ,EAAE,CAAEN,MAAM,CAAES,MAAM,CAAE,CAAE,CAAC,CAAC,CAGxDb,SAAS,CAACM,KAAK,CAAAS,kBAAA,CAAOV,mBAAmB,CAAC,CAC1CP,YAAY,CAACkB,OAAO,CAAC,MAAM,CAAEf,IAAI,CAACgB,SAAS,CAACjB,SAAS,CAACM,KAAK,CAAC,CAAC,CAEjE,CAAC,CAGD,MAAO,IAAM,CAAAY,IAAI,CAAG,QAAP,CAAAA,IAAIA,CAAId,MAA0B,CAAK,CAChD,GAAI,CAAAC,mBAAmB,CAAGL,SAAS,CAACM,KAAK,CACzCD,mBAAmB,CAACO,OAAO,CAAC,SAACH,IAAS,CAAK,CACvC,GAAIA,IAAI,CAACC,EAAE,EAAIN,MAAM,EAAIK,IAAI,CAACI,MAAM,EAAI,CAAC,CACrCJ,IAAI,CAACI,MAAM,EAAE,CACjB,GAAIJ,IAAI,CAACC,EAAE,EAAIN,MAAM,EAAIK,IAAI,CAACI,MAAM,GAAK,CAAC,CAAE,CACxC,GAAI,CAAAN,eAAe,CAAGF,mBAAmB,CAACG,MAAM,CAAC,SAACC,IAAS,QAAK,CAAAA,IAAI,CAACC,EAAE,EAAIN,MAAM,GAAC,CAClFe,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAEb,eAAe,CAAC,CACjDF,mBAAmB,CAAAU,kBAAA,CAAOR,eAAe,CAAC,CAC9C,CACJ,CAAC,CAAC,CACFP,SAAS,CAACM,KAAK,CAAAS,kBAAA,CAAOV,mBAAmB,CAAC,CAC1CP,YAAY,CAACkB,OAAO,CAAC,MAAM,CAAEf,IAAI,CAACgB,SAAS,CAACjB,SAAS,CAACM,KAAK,CAAC,CAAC,CACjE,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}